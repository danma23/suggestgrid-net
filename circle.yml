machine:
  pre:
    - sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF
    - echo "deb http://download.mono-project.com/repo/debian wheezy main" | sudo tee /etc/apt/sources.list.d/mono-xamarin.list
    - sudo apt-get update
    - sudo apt-get -y install referenceassemblies-pcl
    - sudo apt-get install mono-complete
    - sudo apt-get install ca-certificates-mono
    - sudo mozroots --import --sync
    - sudo apt-get install nuget

test:
  override:
      # Set TERM to xterm-256color
    - nuget restore
    - xbuild /p:Configuration=Release SuggestGrid.sln
    
deployment:
  release:
    tag: /[0-9]+(\.[0-9]+)+/
    owner: suggestgrid
    commands:
      - nuget pack SuggestGrid/SuggestGrid.PCL.nuspec
      - nuget push *.nupkg $PACKAGE_MANAGER_API_KEY -s nuget.org